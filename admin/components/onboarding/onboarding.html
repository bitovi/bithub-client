<!DOCTYPE HTML>
<html lang="en">
  <head>
    <title>Onboarding demo page!</title>
  </head>
  <body>
    <div class="container">
      <div id="content"></div>
    </div>
    <script type='text/javascript' src='../../bower_admin/components/requirejs/require.js'></script>
    <script type='text/javascript' src='../../requirejsconfig.js'></script>
    <script type='text/javascript'>

      steal('admin/components/onboarding/onboarding', 'css!/styles/mockup/mockup', 'less!admin/components/onboarding/onboarding', function(Onboarding){

        var renderer = can.view.mustache('<onboarding state="state"></onboarding>');

        var state = can.compute(""),
            currentIndex = -1;

        $('#content').html(renderer({
          state : state
        }));
        

        var stateList = ['homepage', 'organization', 'scoring_rules', 'norewards', 'rewards', 'dashboard_popup', 'dashboard', 'scoring_rules_page', 'rewards_page']


        STATES = {};

        can.each(stateList, function(s, i){
          STATES[s] = function(){
            currentIndex = i;
            state(s)
          }
        })

        NEXT = function(){
          currentIndex++;
          if(currentIndex === stateList.length){
            currentIndex = 0;
          }
          STATES[stateList[currentIndex]]();
        }

        PREV = function(){
          currentIndex--
          if(currentIndex === -1){
            currentIndex = stateList.length - 1;
          }
          STATES[stateList[currentIndex]]();
        }

        NEXT();

        $(document).bind('keyup', function(e){
          if(e.which === 39){
            NEXT();
          } else if (e.which === 37){
            PREV();
          }
        })

      })
    </script>
  </body>
</html>
